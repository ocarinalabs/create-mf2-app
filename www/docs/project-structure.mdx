---
title: "Project Structure"
description: "Understanding your MF2 app architecture"
icon: "folder-tree"
---

# Project Structure

**Built with modern tools developers and LLMs love.** MF2 apps follow Next.js 15 conventions with some opinionated additions. Here's what each folder does and when you'll actually touch it. The structure is designed so AI can navigate and understand your codebase instantly.

<Note>
  **80/20 Rule**: You'll spend 80% of your time in `src/app`, `src/components`, and `convex`. The rest is mostly set-and-forget.
</Note>

## File Tree

<Tabs>
  <Tab title="Landing Page">
    ```
    my-app/
    ├── src/
    │   ├── app/                    # Pages and routing
    │   │   ├── layout.tsx         # Root layout
    │   │   ├── page.tsx           # Homepage
    │   │   └── globals.css        # Global styles
    │   ├── components/            # React components
    │   │   └── ui/               # shadcn/ui components
    │   ├── hooks/                # Custom React hooks
    │   └── lib/                  # Utilities
    │       └── utils.ts          # Helper functions
    ├── public/                   # Static assets
    ├── .env.local               # Local environment variables
    ├── components.json          # shadcn/ui config
    ├── next.config.mjs          # Next.js config
    ├── tailwind.config.ts       # Tailwind config
    └── tsconfig.json            # TypeScript config
    ```
  </Tab>
  
  <Tab title="SaaS Starter">
    ```
    my-app/
    ├── src/
    │   ├── app/                    # Pages and routing
    │   │   ├── layout.tsx         # Root layout with providers
    │   │   ├── page.tsx           # Homepage
    │   │   ├── (auth)/            # Auth pages group
    │   │   ├── (dashboard)/       # Dashboard pages
    │   │   └── api/               # API routes
    │   ├── components/            # React components
    │   │   ├── ui/               # shadcn/ui components
    │   │   ├── dashboard/        # Dashboard components
    │   │   └── marketing/        # Landing page components
    │   ├── hooks/                # Custom React hooks
    │   └── lib/                  # Utilities
    ├── convex/                   # Backend (the magic ✨)
    │   ├── _generated/           # Type-safe API (don't touch)
    │   ├── schema.ts             # Database schema
    │   ├── auth.ts               # Auth functions
    │   ├── users.ts              # User queries/mutations
    │   └── http.ts               # HTTP endpoints
    ├── public/                   # Static assets
    ├── .env.local               # Local environment variables
    └── [config files]           # The usual suspects
    ```
  </Tab>
</Tabs>

## The folders you'll actually use

### `src/app` - Where you build pages

This is Next.js 15's App Router. Each folder becomes a route:

```typescript
src/app/
├── page.tsx                    # → /
├── about/
│   └── page.tsx               # → /about
├── blog/
│   ├── page.tsx               # → /blog
│   └── [slug]/
│       └── page.tsx           # → /blog/some-post
└── (dashboard)/               # Route group (no URL change)
    ├── layout.tsx             # Shared dashboard layout
    ├── dashboard/
    │   └── page.tsx           # → /dashboard
    └── settings/
        └── page.tsx           # → /settings
```

<Tip>
  **Route Groups**: Folders wrapped in `()` organize pages without affecting URLs. Perfect for applying different layouts to marketing vs app pages.
</Tip>

### `src/components` - Your UI building blocks

```typescript
src/components/
├── ui/                        # shadcn/ui components
│   ├── button.tsx            # <Button />
│   ├── card.tsx              # <Card />
│   └── ...                   # 40+ components ready to use
├── dashboard/                # Domain-specific components
│   ├── stats-card.tsx
│   └── user-table.tsx
└── marketing/
    ├── hero.tsx
    └── pricing-card.tsx
```

**When to create a new component:**
- Used in 2+ places
- Complex enough to warrant isolation
- Improves readability of parent

### `convex/` - Your entire backend (SaaS only)

This is where MF2 shines. Your backend in TypeScript, syncing in real-time:

```typescript
convex/
├── _generated/               # Auto-generated types
│   ├── api.ts               # Use this everywhere
│   └── [other files]        # Don't edit these
├── schema.ts                # Define your data model
├── users.ts                 # User-related functions
├── projects.ts              # Project functions
└── http.ts                  # Webhooks, REST endpoints
```

**Example schema:**
```typescript convex/schema.ts
import { defineSchema, defineTable } from "convex/server";
import { v } from "convex/values";

export default defineSchema({
  users: defineTable({
    name: v.string(),
    email: v.string(),
    tier: v.union(v.literal("free"), v.literal("pro")),
  }).index("by_email", ["email"]),
  
  projects: defineTable({
    name: v.string(),
    userId: v.id("users"),
    createdAt: v.number(),
  }).index("by_user", ["userId"]),
});
```

**Example function:**
```typescript convex/projects.ts
import { mutation } from "./_generated/server";
import { v } from "convex/values";

export const create = mutation({
  args: { name: v.string() },
  handler: async (ctx, args) => {
    const user = await ctx.auth.getUserIdentity();
    if (!user) throw new Error("Not authenticated");
    
    return await ctx.db.insert("projects", {
      name: args.name,
      userId: user.subject,
      createdAt: Date.now(),
    });
  },
});
```

## The files you'll rarely touch

### Configuration files

These are pre-configured for the 99% use case:

- **`next.config.mjs`** - Next.js settings (done)
- **`tailwind.config.ts`** - Colors and theme (maybe touch)
- **`tsconfig.json`** - TypeScript settings (done)
- **`components.json`** - shadcn/ui config (done)
- **`.eslintrc.json`** - Linting rules (done)
- **`postcss.config.mjs`** - CSS processing (done)

### Environment setup

```bash
.env.example                  # Template (commit this)
.env.local                    # Your secrets (don't commit)
```

**Required for SaaS:**
```env
# Convex
CONVEX_DEPLOYMENT=
NEXT_PUBLIC_CONVEX_URL=

# Clerk
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=
CLERK_SECRET_KEY=

# Polar (payments)
POLAR_ACCESS_TOKEN=
POLAR_WEBHOOK_SECRET=

# Resend (emails)
RESEND_API_KEY=
```

## Adding new features

### Adding a page

```bash
# Create the file
touch src/app/features/page.tsx
```

```tsx src/app/features/page.tsx
export default function FeaturesPage() {
  return (
    <div>
      <h1>Features</h1>
    </div>
  );
}
```

That's it. Route created at `/features`.

### Adding a component

```bash
# Use shadcn/ui CLI
npx shadcn@latest add dialog

# Or create your own
touch src/components/feature-card.tsx
```

### Adding backend logic (SaaS)

```bash
# Create a new Convex module
touch convex/features.ts
```

```typescript convex/features.ts
import { query, mutation } from "./_generated/server";
import { v } from "convex/values";

export const list = query({
  handler: async (ctx) => {
    return await ctx.db.query("features").collect();
  },
});

export const create = mutation({
  args: { 
    name: v.string(),
    description: v.string(),
  },
  handler: async (ctx, args) => {
    return await ctx.db.insert("features", args);
  },
});
```

Use it anywhere:
```tsx
import { useQuery, useMutation } from "convex/react";
import { api } from "@/convex/_generated/api";

function Features() {
  const features = useQuery(api.features.list);
  const createFeature = useMutation(api.features.create);
  
  // Full type safety, real-time updates
}
```

## Best practices

### What goes where?

- **Pages** → `src/app/[route]/page.tsx`
- **Layouts** → `src/app/[route]/layout.tsx`
- **Components** → `src/components/[domain]/`
- **API logic** → `convex/[feature].ts`
- **Types** → Inline or `src/types/` for shared
- **Utils** → `src/lib/[util].ts`

### File naming

```
✓ user-profile.tsx      # Components: kebab-case
✓ useUser.ts           # Hooks: camelCase with 'use'
✓ formatDate.ts        # Utils: camelCase
✓ UserProfile.tsx      # Also fine for components
✗ UserProfile.js       # TypeScript only
✗ user_profile.tsx     # No snake_case
```

### Organizing as you scale

Start flat, nest when obvious:

```
# Early stage (flat is fine)
components/
├── header.tsx
├── footer.tsx
├── user-card.tsx
└── billing-form.tsx

# Growing app (domain folders)
components/
├── common/
│   ├── header.tsx
│   └── footer.tsx
├── user/
│   ├── user-card.tsx
│   └── user-avatar.tsx
└── billing/
    ├── billing-form.tsx
    └── price-table.tsx
```

## What's generated vs what's yours

### Don't edit these:
- `convex/_generated/*` - Regenerated on every change
- `src/components/ui/*` - Managed by shadcn/ui (but you can if needed)

### Definitely edit these:
- `src/app/*` - Your pages
- `src/components/*` (except `/ui`)
- `convex/*.ts` (except `/_generated`)
- `public/*` - Your assets

## Common patterns

### Protected pages
```tsx src/app/(dashboard)/layout.tsx
import { auth } from "@clerk/nextjs/server";
import { redirect } from "next/navigation";

export default async function DashboardLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  const { userId } = await auth();
  
  if (!userId) {
    redirect("/sign-in");
  }
  
  return <>{children}</>;
}
```

### Real-time data
```tsx
const projects = useQuery(api.projects.list);
const createProject = useMutation(api.projects.create);

// That's it. It syncs automatically.
```

### Loading states
```tsx
const data = useQuery(api.something.get);

if (data === undefined) {
  return <Skeleton />; // Loading
}

if (data === null) {
  return <Empty />; // No data
}

return <ShowData data={data} />;
```

## Need help?

<CardGroup cols={2}>
  <Card title="Component not found?" href="/troubleshooting#component-errors">
    Common import issues and fixes
  </Card>
  <Card title="Convex errors?" href="/troubleshooting#convex-errors">
    Schema mismatches and solutions
  </Card>
</CardGroup>

Remember: This structure has shipped real products making real money. Trust it until it breaks, then adapt it.

**For devs who want to ship fast. The stack AI moves fast with.**